{
  "format_version": "1.0",
  "description": "Desired output format for chess position evaluations",
  "structure": {
    "games": "Array of game objects, each containing metadata and a list of moves",
    "moves": "Array of move objects, each representing one ply with position analysis"
  },
  "example_output": {
    "games": [
      {
        "game_index": 1,
        "event": "BAN-ch 48th Dhaka (8)",
        "site": "1",
        "date": "2024.07.01",
        "round": "1",
        "white": "Ahmed,Sk Nasir",
        "white_elo": 2132,
        "black": "Hossain,Enamul",
        "black_elo": 2357,
        "result": "1/2-1/2",
        "eco": "A22",
        "moves": [
          {
            "ply": 1,
            "fen": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",
            "to_move": "white",
            "total_visits": 10189,
            "visits_on_better": 0,
            "played_move": "e4",
            "evaluation": {"rank": 1, "visits": 7234, "policy": 0.42, "q_value": 0.395, "wdl": [480, 370, 150]},
            "candidate_moves": [
              { "move": "e4 ", "rank": 1, "visits": 7234, "policy": 0.42, "q_value": 0.395, "wdl": [480, 370, 150] },
              { "move": "d4 ", "rank": 2, "visits": 1566, "policy": 0.18, "q_value": 0.380, "wdl": [460, 380, 160] },
              { "move": "Nf3", "rank": 3, "visits":  892, "policy": 0.15, "q_value": 0.375, "wdl": [450, 390, 160] }
            ]
          },
          {
            "ply": 2,
            "fen": "rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq - 0 1",
            "to_move": "black",
            "total_visits": 10034,
            "visits_on_better": 0,
            "played_move": "e5",
            "evaluation": {"rank": 1, "visits": 6891, "policy": 0.38, "q_value": -0.395, "wdl": [150, 370, 480]},
            "candidate_moves": [
              { "move": "e5", "rank": 1, "visits": 6891, "policy": 0.38, "q_value": -0.395, "wdl": [150, 370, 480] },
              { "move": "c5", "rank": 2, "visits": 2145, "policy": 0.22, "q_value": -0.380, "wdl": [160, 360, 480] },
              { "move": "e6", "rank": 3, "visits":  964, "policy": 0.16, "q_value": -0.372, "wdl": [165, 355, 480] }
            ]
          }
        ]
      }
    ]
  },
  "field_descriptions": {
    "game_level": {
      "game_index": "Sequential game number in the output",
      "event": "Tournament or match name",
      "site": "Location or site identifier",
      "date": "Date in YYYY.MM.DD format",
      "round": "Round number",
      "white": "White player name",
      "white_elo": "White player's rating",
      "black": "Black player name",
      "black_elo": "Black player's rating",
      "result": "Game result (1-0, 0-1, 1/2-1/2, or *)",
      "eco": "ECO (Encyclopedia of Chess Openings) code",
      "moves": "Array of move objects (see move_level below)"
    },
    "move_level": {
      "ply": "Half-move number (1, 2, 3, ...). Ply 1 = White's first move, Ply 2 = Black's first move",
      "fen": "Position before the move in Forsyth-Edwards Notation",
      "to_move": "Side to move: 'white' or 'black'",
      "total_visits": "Sum of visits across ALL legal moves (approximately equals node budget)",
      "visits_on_better": "Sum of visits on moves ranked strictly better than played move (0 if played move is rank 1)",
      "played_move": "The move that was actually played (SAN notation)",
      "evaluation": "Evaluation of the played move (see evaluation_fields below)",
      "candidate_moves": "Top N alternative moves analyzed (see candidate_fields below)"
    },
    "evaluation_fields": {
      "rank": "Rank of the played move (1 = best according to visits)",
      "visits": "MCTS nodes visited for the played move",
      "policy": "Neural network policy (prior probability) for the played move",
      "q_value": "Q-value from MCTS search for the played move (expected value from side-to-move perspective)",
      "wdl": "Win/Draw/Loss in permille [W, D, L] for the played move from side-to-move perspective. Values sum to 1000."
    },
    "candidate_fields": {
      "move": "Move in SAN (Standard Algebraic Notation)",
      "rank": "Move ranking (1 = best according to visits)",
      "visits": "MCTS nodes visited for this specific move",
      "policy": "Neural network policy (prior probability) for this move",
      "q_value": "Q-value from MCTS search (expected value from side-to-move perspective)",
      "wdl": "Win/Draw/Loss in permille [W, D, L] for this move from side-to-move perspective. Values sum to 1000."
    }
  },
  "notes": [
    "WDL values are in permille (parts per thousand) and sum to 1000",
    "WDL is always from the perspective of the side to move",
    "For Black's moves, high win values indicate Black advantage",
    "Q-values are also from side-to-move perspective (positive = advantage)",
    "Ranks are determined by visit counts (more visits = better rank)",
    "evaluation.rank shows the rank of the played move (1 = best move)",
    "visits_on_better = 0 when the best move was played (rank 1)",
    "visits_on_better / total_visits = fraction of compute 'wasted' on better alternatives",
    "total_visits should approximately equal the node budget (e.g., 1000 or 10000)",
    "Candidate moves are sorted by rank and limited to top N (typically 5-10)",
    "All moves use SAN (Standard Algebraic Notation), not UCI",
    "Field order is consistent: rank, visits, policy, q_value, wdl"
  ]
}