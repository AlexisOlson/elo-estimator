{
  "format_version": "1.0",
  "description": "Desired output format for chess position evaluations",
  "structure": {
    "games": "Array of game objects, each containing metadata and a list of moves",
    "moves": "Array of move objects, each representing one ply with position analysis"
  },
  "example_output": {
    "games": [
      {
        "game_index": 1,
        "event": "BAN-ch 48th Dhaka (8)",
        "site": "1",
        "date": "2024.07.01",
        "round": "1",
        "white": "Ahmed,Sk Nasir",
        "white_elo": 2132,
        "black": "Hossain,Enamul",
        "black_elo": 2357,
        "result": "1/2-1/2",
        "eco": "A22",
        "moves": [
          {
            "ply": 1,
            "fen": "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",
            "to_move": "white",
            "total_legal_moves": 20,
            "total_visits": 1022,
            "visits_on_better": 654,
            "played_move": "e4",
            "evaluation": {"rank": 6, "visits": 10, "policy": 0.0725, "q_value": 0.01256, "u_value": 0.04231, "wdl": [56, 901, 43]},
            "candidate_moves": [
              { "move": "Nf3", "rank": 1, "visits": 19, "policy": 0.1194, "q_value": 0.02891, "u_value": 0.03245, "wdl": [63, 903, 34] },
              { "move": "d4" , "rank": 2, "visits": 19, "policy": 0.1227, "q_value": 0.02861, "u_value": 0.03341, "wdl": [63, 903, 34] },
              { "move": "c4" , "rank": 3, "visits": 15, "policy": 0.1063, "q_value": 0.02329, "u_value": 0.03562, "wdl": [60, 903, 37] }
            ]
          },
          {
            "ply": 2,
            "fen": "rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq - 0 1",
            "to_move": "black",
            "total_legal_moves": 20,
            "total_visits": 1024,
            "visits_on_better": 0,
            "played_move": "e5",
            "evaluation": {"rank": 1, "visits": 102, "policy": 0.5994, "q_value": -0.00719, "u_value": 0.01234, "wdl": [46, 901, 53]},
            "candidate_moves": [
              { "move": "e5", "rank": 1, "visits": 102, "policy": 0.5994, "q_value": -0.00719, "u_value": 0.01234, "wdl": [46, 901,  53] },
              { "move": "c6", "rank": 2, "visits":   6, "policy": 0.0746, "q_value": -0.09848, "u_value": 0.03982, "wdl": [33, 835, 132] },
              { "move": "c5", "rank": 3, "visits":   5, "policy": 0.0585, "q_value": -0.0938 , "u_value": 0.04123, "wdl": [31, 844, 125] }
            ]
          }
        ]
      }
    ]
  },
  "field_descriptions": {
    "game_level": {
      "game_index": "Sequential game number in the output",
      "event": "Tournament or match name",
      "site": "Location or site identifier",
      "date": "Date in YYYY.MM.DD format",
      "round": "Round number",
      "white": "White player name",
      "white_elo": "White player's rating",
      "black": "Black player name",
      "black_elo": "Black player's rating",
      "result": "Game result (1-0, 0-1, 1/2-1/2, or *)",
      "eco": "ECO (Encyclopedia of Chess Openings) code",
      "moves": "Array of move objects (see move_level below)"
    },
    "move_level": {
      "ply": "Half-move number (1, 2, 3, ...). Ply 1 = White's first move, Ply 2 = Black's first move",
      "fen": "Position before the move in Forsyth-Edwards Notation",
      "to_move": "Side to move: 'white' or 'black'",
      "total_legal_moves": "Total number of legal moves available in the position",
      "total_visits": "Sum of visits across ALL legal moves (approximately equals node budget)",
      "visits_on_better": "Sum of visits on moves ranked strictly better than played move (0 if played move is rank 1)",
      "played_move": "The move that was actually played (SAN notation)",
      "evaluation": "Evaluation of the played move (see evaluation_fields below)",
      "candidate_moves": "Top N alternative moves analyzed (see candidate_fields below)"
    },
    "evaluation_fields": {
      "rank": "Rank of the played move (1 = best according to visits, q_value, policy)",
      "visits": "MCTS nodes visited for the played move",
      "policy": "Neural network policy (prior probability) for the played move",
      "q_value": "Q-value from MCTS search for the played move (expected value from side-to-move perspective)",
      "u_value": "U-value (exploration bonus) from PUCT formula: U = Cpuct * P * sqrt(N_parent) / (1 + N_child). Higher values indicate less-explored moves with promising policy priors.",
      "wdl": "Win/Draw/Loss in permille [W, D, L] for the played move from side-to-move perspective. Values sum to 1000."
    },
    "candidate_fields": {
      "move": "Move in SAN (Standard Algebraic Notation). Spacing after the closing quote aligns punctuation vertically.",
      "rank": "Move ranking (1 = best according to visits), right-aligned for readability",
      "visits": "MCTS nodes visited for this specific move, right-aligned for readability",
      "policy": "Neural network policy (prior probability) for this move (up to 4 decimal places)",
      "q_value": "Q-value from MCTS search (expected value from side-to-move perspective, up to 5 decimal places)",
      "u_value": "U-value (exploration bonus) from PUCT formula (up to 5 decimal places). Encourages exploration of less-visited moves with high policy priors.",
      "wdl": "Win/Draw/Loss in permille [W, D, L] for this move from side-to-move perspective. Values sum to 1000."
    }
  },
  "notes": [
    "WDL values are in permille (parts per thousand) and sum to 1000",
    "WDL, Q-values, and policy are from the side-to-move perspective (positive values = advantage for the side to move)",
    "Ranks are determined by visit counts, then Q-value, then policy (matching lc0's selection criteria)",
    "visits_on_better = 0 when rank 1 (best move) was played",
    "total_legal_moves indicates position complexity; more moves = higher branching factor",
    "total_visits â‰ˆ node budget; visits_on_better / total_visits = fraction of search spent on superior moves",
    "Candidate moves are sorted by rank and limited to max_candidates",
    "All moves use SAN (Standard Algebraic Notation)",
    "Policy values have up to 4 decimal places, Q-values and U-values up to 5 decimal places"
  ]
}